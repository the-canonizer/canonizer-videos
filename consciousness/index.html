<!doctype html>

<!-- source: https://thenewcode.com/977/Create-Interactive-HTML5-Video-with-WebVTT-Chapters -->

<!-- source: https://hacks.mozilla.org/2014/08/building-interactive-html5-videos/ -->
<html>
<head>
<!--script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></!--script -->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="csrf-token" content="kVt9nhopql6ohpyCJ9uTDHm24i7qiQoNwOaWy3cw">
<title>Canonizer</title>

<!-- Fonts -->
<!-- link href="https://fonts.googleapis.com/css?family=Raleway:100,600" rel="stylesheet" type="text/css" -->

<!-- Bootstrap core CSS-->
<link href="https://canonizer.com/css/bootstrap.min.css" rel="stylesheet">
<!-- Custom fonts for this template-->
<link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<!-- Custom styles for this template-->
<link href="https://canonizer.com/css/canonizer.css" rel="stylesheet">

<!-- jquery  -->
<script src="https://canonizer.com/js/jquery.min.js"></script>
<script src="https://canonizer.com/js/jquery.min.js"></script>
<script src="https://canonizer.com/js/jquery-ui/jquery-ui.js"></script>
<link href="https://canonizer.com/js/jquery-ui/jquery-ui.css" rel="stylesheet" type="text/css">

<!--countdown timers -->
<script src="https://canonizer.com/js/jquery.countdownTimer.min.js"></script>
<link href="https://canonizer.com/css/jquery.countdownTimer.css" rel="stylesheet" type="text/css">



<script>

$(document).ready(function() {
  location_list = document.getElementById("chapters");
  video = document.getElementById("Conciousness_Video");
  track_element = video.getElementsByTagName("track")[0];
  video.addEventListener("loadedmetadata", function run_tests() {
    if (track_element.readyState == 1) {
      setTimeout(run_tests, 0);
    } else {
      setup_chapters();
    }

  // get url set arguments
  var skip_indented_arg = GetURLParameter("skip_indented");
  if (typeof(skip_indented_arg) != "undefined") {
    var skip_indented_check_box = document.getElementById("skip_indented");
    if (skip_indented_arg != 0 ){
      skip_indented_check_box.checked = true;
    } else {
      skip_indented_check_box.checked = false;
    }
  }
  // skip repeats
  var skip_indented_arg = GetURLParameter("skip_repeats");
  if (typeof(skip_indented_arg) != "undefined") {
    var skip_repeats_check_box = document.getElementById("skip_repeats");
    if (skip_indented_arg != 0 ){
      skip_repeats_check_box.checked = true;
    } else {
      skip_indented_check_box.checked = false;
    }
  }


  // set copyright end year
  var year_span = document.getElementById("copyright_year");
  var d = new Date();
  var n = d.getFullYear();
  year_span.innerHTML = n;
  })

  $('a#continue_button').click(function() {
    $(this).toggleClass("down");
  });
});

var chapters = [];
// var video;
var location_list;
var last_cue_time = 0;
var continue_selected = false;
var cues = [];


function select_continue(){
  continue_selected = true;
  var video_message = document.getElementById("video_message");
  video_message.textContent = "";
}

function clean_chapter_name(name) {
  name = name.replace(/\*/g, "");
  name = name.trim();  // remove leading and trailing white space.
  name = name.replace(/ /g, "_");
  name = name.toLowerCase();
  return(name);
}

function setup_chapters(track_element){
  track_element = document.getElementsByTagName("track")[0];
	if ((track_element) && (textTrack = track_element.track)){
		if (textTrack.kind === "chapters"){
      textTrack.mode = 'hidden';
      cues = textTrack.cues;
			// for (var i = 0; i < textTrack.cues.length; ++i) {
      for (var i = (cues.length - 1); i >= 0; --i) {
				cue = cues[i];
				chapter_name = clean_chapter_name(cue.text);
				start = cue.startTime;

        chapters[chapter_name] = start;

				new_local = document.createElement("li");
				new_local.setAttribute('id', start); //  + "_id");
        new_local.setAttribute('accessKey', chapter_name);
        new_local.setAttribute('class', "nav-link-text");
        var print_name = cue.text;
        if (print_name == "Bionic Eye"){
          print_name = "&nbsp;&nbsp;&nbsp;&nbsp;" + print_name;
        }
        new_local.innerHTML = print_name;
        location_list.insertBefore(new_local, location_list.childNodes[0]);
				new_local.addEventListener("click",
				  function() {
            var start_time = this.id;
            // start_time = start_timereplace(/_id/g, "");
					  video.currentTime = start_time;
				  },
          false
        );
      }

      // flashing pixe;
      var current_cue = cues[1];
      current_cue.onenter = function() {
        var video_message = document.getElementById("video_message");
        video_message.innerHTML = "Once you have noticed the inverting pixel in the brain, proving that for every pixel of knowledge we have, there must be something, physical, that can change and be computationally bound into consciouss awarenss<br><center><b>click continue.</b></center>";
        continue_selected = false;
      }
      current_cue.onexit = function() {
      var current_cue = cues[1];
      var skip_repeats = document.getElementById("skip_repeats");
      if (! skip_repeats.checked && ! continue_selected) {
        continue_selected = false;
        // video.controls = false;
        video.currentTime = current_cue.startTime;
      } else {
        var video_message = document.getElementById("video_message");
        video_message.textContent = "";
      }

      // bionic eye
      var current_cue = cues[2];
      current_cue.onenter = function() {
        var current_cue = cues[2];
        var skip_indented = document.getElementById("skip_indented");
        if (skip_indented.checked)
          video.currentTime = cues[3].startTime;
      }

      }
      textTrack.addEventListener("cuechange",
        function() {
            if (this.activeCues.length > 0) {
            var current_location = this.activeCues[0].startTime;
            if (chapter = document.getElementById(current_location)) {; // + "_id")) {
              var locations = [].slice.call(document.querySelectorAll("#chapters li"));
              for (var i = 0; i < locations.length; ++i) { 
                locations[i].classList.remove("menu-active");
              }
              chapter.classList.add("menu-active");
              // location_list.style.top = "-"+chapter.parentNode.offsetTop+"px";
          }
          last_cue_time = current_location;
         }
        },false
      );

      var chapter_val = GetURLParameter("chapter");
      if (typeof(chapter_val) != "undefined") {
        if (chapters.hasOwnProperty(chapter_val)) {
          video.currentTime = chapters[chapter_val];
        }
      }

		}
	}
}


// this was stolen from: http://www.jquerybyexample.net/2012/06/get-url-parameters-using-jquery.html
// I made it case insensative.  (all lower case)
// var tech = GetURLParameter('technology');
// var blog = GetURLParameter('blog');
function GetURLParameter(sParam) {
  var sPageURL = window.location.search.substring(1);
  var sURLVariables = sPageURL.split('&');
  sParam = sParam.toLowerCase();
  for (var i = 0; i < sURLVariables.length; i++) {
    var sParameterName = sURLVariables[i].split('=');
    sParameterName[0] = sParameterName[0].toLocaleLowerCase();
    if (sParameterName[0] == sParam) {
      return sParameterName[1].toLocaleLowerCase();
    }
  }
}


</script>
</head>

<body>

  <table width=100%>
    <tr>
      <th width="250px">
        <a style="margin-top: 0.5rem; margin-right: 1rem; margin-bottom: 0.5rem; margin-left: 1rem;" class="navbar-brand" href="https://canonizer.com">
          <img src="https://canonizer.com/img/logo.png" width=146 height=110>
        </a>
      </th>
      <th width="960px" style="text-align: center;"><font style="text-align: center;" size=6>There&nbsp;is&nbsp;no&nbsp;"hard&nbsp;mind&nbsp;body&nbsp;problem"<br>It's just a color problem</font></th>
      <th></tr>
    <tr>
      <td style="vertical-align: top;">
        <figcaption style="margin-top: 0.5rem; margin-right: 1rem; margin-bottom: 0.5rem; margin-left: 1rem;" >
          <!---  chapters list is put here:  -->
          <ol style="padding-left: 1rem;" class="uppermenu" id="chapters">

          </ol>
          <!---  chapters list is put above:  -->

          <ul style="margin-top: 100px;" class="lowermneu asof">
            <button class=centered id="continue_button" onclick="select_continue();">Continue</button>
            <div style="margin-left: 20px; margin-top: 10px;">
              <input style="margin-top: 8px;" id="skip_indented" type="checkbox">Skip Indented
            </div>
            <div style="margin-left: 20px; margin-top: 10px; margin-bottom: 8px;">
              <input style="margin-top: 8px;" id="skip_repeats" type="checkbox">Skip Repeats *
            </div>
          </ul>
        </figcaption>
      </td>
      <td>
        <div class="video-content-wrapper">
          <div class="video-right-whitePnl">
            <div class="container-fluid">
              <div class="Scolor-Pnl">
                <video controls id="Conciousness_Video">
                  <source src="Conciousness_Video_V15.mp4">
                  <track kind="chapters" label="Locations" src="Conciousness_Video_V15.vtt" srclang="en" default>                
                </video>
                <div style="min-height: 100px; margin: 0.5rem 2rem 2rem 2rem;" id=video_message> </div>
              </div>
            </div>
          </div>
        </div>
      </td>
      <td>
        <div class="homeADDright">
          <div class="right-addsense"><!----
            <script type="text/javascript">
                google_ad_client = "pub-6646446076038181";
                //120x600, right bar
                google_ad_slot = "5819006657";
                google_ad_width = 115;
                google_ad_height = 600;
                //-->
            <!--/script> -->
            <script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
          </div>
        </div>
      </td>
    </tr>
    <tr >
      <td></td><td ></td><td></td>
    </tr>
  </table>
  <footer class="sticky-footer">
    <div class="container">
        <div class="row">
            <!--<div class="col-sm-4 pd-l-0"><span>Sponsers: &nbsp;&nbsp; <img src="img/mta-thumb.png"/></span></div>-->
            <div class="col-sm-12 text-center">
                <small>Copyright owned by the volunteers contributing to the system and its contents (2006 - <span id=copyright_year></span>)</small>
                <small>Comments and Questions: support@canonizer.com</small>
	              <small><a href="{{url('privacypolicy')}}">Privacy Policy</a> | Pattent: US 8,160,970 B2 | <a href="{{url('termservice')}}">Terms & Services</a></small>
            </div>
        </div>
    </div>
  </footer>


</body>

<style>
.centered {
    display: block;
    margin-left: auto;
    margin-top: 4px;
    margin-right: auto }

  figure {
    font-size: 0;
    position: relative;
    background: #000;
  }
  figure video {
    width: 75%;
    height: auto;
    display: inline-block;
  }
  figure figcaption {
    position: absolute;
    right: 0; top: 0;
    background: rgb(245, 245, 245);
    width: 25%;
    font-size: .8rem;
    color: #666;
    height: 100%;
    overflow-y: scroll;
  }
  figure figcaption ol {
    position: relative;
    list-style-type: none;
    margin: 0; padding: 0;
  }
  figure figcaption ol li {
    padding: .7rem 1rem;
    border-bottom: 1px dashed #000;
    transition: .3s;
  }
  .current {
    background: hsl(45,80%,50%);
    color: #000;
  }

  li {
    color: rgb(0, 0, 255)
  }

.video-content-wrapper {
    margin-left: 0px;

}
.video-right-whitePnl {
    background-color: rgb(255, 255, 255);
    padding:2rem 1rem 2rem 1rem;
}



a.down {
  background: #bbb;
  border-top: solid 2px #777;
  border-left: solid 2px #777;
  border-bottom: solid 2px #eaeaea;
  border-right: solid 2px #eaeaea;
}
</style>

</html>


